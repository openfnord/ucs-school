product: ucsschool
release: "4.2"
version: [1]
scope: ucs_4.2-0-ucs-school-4.2
src: ucs-school-import
fix: 15.0.3-31A~4.2.0.201804061547
desc: |
 * The global user import configuration (<filename>/usr/share/ucs-school-import/configs/user_import_defaults.json</filename>) does not contain any scheme anymore. Its existence was preventing the creation of users without email address. If your configuration was using the default email or username scheme, then it must now be recreated in <filename>/var/lib/ucs-school-import/configs/user_import.json</filename>. If the input CSV does not supply an email address or username and no scheme is given, new users will not have an email address (or fail to be created without a username) (Bug #45972). The original configuration was:
    <programlisting>
    "scheme": {
    		"email": "&lt;firstname&gt;[0].&lt;lastname&gt;@&lt;maildomain&gt;",
    		"recordUID": "&lt;email&gt;",
    		"username": {
    			"default": "&lt;:umlauts&gt;&lt;firstname&gt;[0].&lt;lastname&gt;&lt;:lower&gt;[COUNTER2]"
    		}
    	}
    </programlisting>
 * Within the CLI import the handling of email addresses has been altered: the user import now allows the removal email addresses. To do so, within the import configuration (json file) a CSV column must be mapped to the <literal>email</literal> property. To remove the mail address, in the CSV file the fields entry of the <literal>email</literl> column must be empty. Please note that an email address will only be generated from a configured scheme, when no CSV column for email addresses exist in the CSV file or no column is mapped (Bug #46317).
 * The internal handling of python hooks for the import process has been improved: syntax and consistency checks are now done after running the <literal>pre_create</literal> / <literal>pre_modify</literal> / <literal>pre_move</literal> hooks (Bug #46317).
 * Generated passwords of newly created users are now better readable (Bug #45640).
 * An internal improvement has been made to give python hooks more flexibility: if available, the responsible line of the CSV file is now attached to an ImportUser object that is about to be deleted (Bug #46384).
 * User property verification checks are executed in dry-run again (Bug #46571).
 * A dependency solver was introduced, that will sort the order of autogeneration of attributes from schemes so that they can depend on each other (Bug #46754)
bug: [45972, 46317, 45640, 46384, 46571, 46754]
