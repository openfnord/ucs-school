<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE book [
	<!ENTITY % extensions SYSTEM "../stylesheets/macros.ent" >
	<!ENTITY % DocBookDTD PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
	"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
	<!ENTITY % entities SYSTEM "../stylesheets/macros-de.ent" >
	%extensions;
	%DocBookDTD;
	%entities;
]>
<book lang="de" id="errata-changelog-4.2-de">

	<bookinfo>
 		<title>UCS@school 4.2 v10 Changelog</title>
		<!-- <subtitle>Changelog für das Update von UCS@school 4.2 v9 nach 4.2 v10</subtitle> -->
		<legalnotice>
			<literallayout>
Version 4.2 v10
Stand: 04. July 2018
			</literallayout>
			<literallayout lang="">
Alle Rechte vorbehalten./ All rights reserved.
(c) 2002-2017
Univention GmbH
Mary-Somerville-Straße 1
28359 Bremen
Deutschland
feedback@univention.de
			</literallayout>
			<para>
				Jede aufgeführte Marke und jedes Warenzeichen steht im Eigentum ihrer jeweiligen eingetragenen Rechtsinhaber.
				Linux ist ein eingetragenes Warenzeichen von Linus Torvalds.
			</para>
			<para lang="en">
				The mentioned brand names and registered trademarks are owned by the respective legal owners in each case.
				Linux is a registered trademark of Linus Torvalds.
			</para>
		</legalnotice>
	</bookinfo>

	<chapter id="changelog:main">
		<title>&ucsUAS;-Update</title>
		<para>
			Dieses Dokument enthält die Changelogs mit den detaillierten Änderungsinformationen zum Update von &ucsUAS; von Version 4.2 v9 nach 4.2 v10.
			Sofern notwendig, werden wichtige Hinweise zum Update in einem separaten Abschnitt behandelt. Die Changelogs werden nur in Englisch
			gepflegt. Die Änderungsinformationen für vorherige Versionssprünge finden sich unter <ulink	url="https://docs.software-univention.de/"/>.
		</para>

		<section id="changelog:prepare">
			<title>Generelle Hinweise zum Update</title>
			<para>
				Während der Aktualisierung kann es zu Ausfällen von Diensten innerhalb der Domäne
				kommen. Aus diesem Grund sollte das Update innerhalb eines Wartungsfensters
				erfolgen. Grundsätzlich wird empfohlen das Update zunächst in einer Testumgebung
				einzuspielen und zu testen. Die Testumgebung sollte dabei identisch zur
				Produktivumgebung sein.
			</para>
		</section>

		<section id="changelog:newerrata">
			<title>Veränderungen im Updateprozess</title>
			<para>
				In der Vergangenheit wurden Updates für UCS@school immer als ein neues App-Update im Univention App Center bereitgestellt.
				Beginnend mit UCS@school 4.2 v10 bzw. UCS@school 4.3 v4 wird dieser Prozess verschlankt. Kleinere Updates und Fehlerbereinigungen
				(Errata für UCS@school), die keine Interaktion mit dem Administrator erforderlich machen, werden in Zukunft im Repository der
				bereits veröffentlichten App-Version von UCS@school herausgegeben. Die Changelog-Dokumente, die wir mit jeder UCS@school-App-Version
				herausgeben, werden	dann entsprechend um einen neuen Abschnitt erweitert, aus dem ersichtlich wird, zu welchem Zeitpunkt welche
				Pakete veröffentlich und welche Fehler dabei behoben wurden.
			</para>
		</section>

		<section id="changelog:changelogs" lang="en">
			<title>Changelog</title>
						<section id="changelog:ucsschool:ucs-school-umc-import" lang="en">
				<title>Source package ucs-school-umc-import</title>
				<itemizedlist>
					<listitem><para>The user roles drop-down item displayed a static list of user roles that also contained unavailable roles. The drop-down item now dynamically obtains a list of available user roles from the server (<u:bug>46832</u:bug>).</para></listitem>

				</itemizedlist>
			</section>
			<section id="changelog:ucsschool:ucs-school-umc-rooms" lang="en">
				<title>Source package ucs-school-umc-rooms</title>
				<itemizedlist>
					<listitem><para>The module now offers to create a new room if none exists for the selected school (<u:bug>46872</u:bug>)</para></listitem>

				</itemizedlist>
			</section>
			<section id="changelog:ucsschool:ucs-school-umc-exam" lang="en">
				<title>Source package ucs-school-umc-exam</title>
				<itemizedlist>
					<listitem><para>When starting an exam, users often overlooked selecting the correct room so that the exam was started for the wrong computer/room. The selection field for the room in the exam wizard is now empty and the user must explicitly select a room, to prevent the described issue (<u:bug>46883</u:bug>).</para></listitem>

				</itemizedlist>
			</section>
			<section id="changelog:ucsschool:ucs-school-umc-groups" lang="en">
				<title>Source package ucs-school-umc-groups</title>
				<itemizedlist>
					<listitem><para>The UCR variable descriptions regarding autosearch have been revised (<u:bug>46905</u:bug>).</para></listitem>

				</itemizedlist>
			</section>
			<section id="changelog:ucsschool:ucs-school-import" lang="en">
				<title>Source package ucs-school-import</title>
				<itemizedlist>
					<listitem><para>When modifying an existing user, the attribute of the old user object in "ImportUser.old_user" were incorrectly updated. This has been fixed (<u:bug>47028</u:bug>).</para></listitem>

					<listitem><para>New user role assignment can now be handled by the regular CSV reader class. This allows the use of the special mapping value <literal>__role</literal>. Allowed values in the CSV column are <literal>student</literal>, <literal>staff</literal>, <literal>teacher</literal> and <literal>teacher_and_staff</literal> (<u:bug>47073</u:bug>).</para></listitem>

					<listitem><para>Leading and trailing whitespace in CSV cells is now removed. Access to the unmodified data (including the whitespace is still possible through the <literal>input_data</literal> attribute of <classname>ImportUser</classname> objects (<u:bug>47092</u:bug>).</para></listitem>

					<listitem><para>Increase Celery worker startup verbosity, adapt HTTP-API import code to handle newer Django versions (<u:bug>47118</u:bug>).</para></listitem>

					<listitem><para>When using the HTTP-API based CSV import, the roles of the connected user can now be retrieved through a HTTP-API resource (<u:bug>46832</u:bug>).</para></listitem>

					<listitem><para>A ou_post_create hook has been added, that creates the corresponding Django School object (<u:bug>46832</u:bug>).</para></listitem>

					<listitem><para>The WSGI server Gunicorn now runs on port 9898 by default. This can be changed using the UCR variable <envar>ucsschool/import/http_api/wsgi_server_port</envar> (<u:bug>47134</u:bug>).</para></listitem>

					<listitem><para>The loglevel of the WSGI server Gunicorn is now configurable through the UCR variable <envar>ucsschool/import/http_api/wsgi_server_loglevel</envar> (<u:bug>46831</u:bug>).</para></listitem>

					<listitem><para>The HTTP-API import now always prepends the school name to class names read from a CSV file (<u:bug>47157</u:bug>).</para></listitem>

					<listitem><para>The HTTP-API now uses a default and a custom configuration file <filename>user_import_http-api.json</filename> located in the same directories as the other configuration files (<u:bug>471567</u:bug>).</para></listitem>

					<listitem><para>Custom django-admin commands were added to make the join script more reliable (<u:bug>47181</u:bug>).</para></listitem>

					<listitem><para>The WSGI server Gunicorn now runs as an unprivileged user (<u:bug>46829</u:bug>).</para></listitem>

					<listitem><para>The WSGI server Gunicorn is now restarted when the machine account is changed (<u:bug>47237</u:bug>).</para></listitem>

				</itemizedlist>
			</section>
			<section id="changelog:ucsschool:ucs-school-lib" lang="en">
				<title>Source package ucs-school-lib</title>
				<itemizedlist>
					<listitem><para>Internal enhancement: Support for the deepcopy operation was added to all ucsschool.lib objects (<u:bug>47092</u:bug>).</para></listitem>

					<listitem><para>Internal enhancement: Support for setting the owner of a logfile was added (<u:bug>46829</u:bug>).</para></listitem>

				</itemizedlist>
			</section>
			<section id="changelog:ucsschool:ucs-school-umc-computerroom" lang="en">
				<title>Source package ucs-school-umc-computerroom</title>
				<itemizedlist>
					<listitem><para>Instead of showing an empty list of computer rooms there is now a dialog asking if the user wants to create one. The dialog is only shown if the user is authorized to create a room and the module manages only a single school (<u:bug>46872</u:bug>).</para></listitem>

				</itemizedlist>
			</section>
			<section id="changelog:ucsschool:ucs-school-umc-users" lang="en">
				<title>Source package ucs-school-umc-users</title>
				<itemizedlist>
					<listitem><para>The UDM flag <emphasis>pwdChangeNextLogin</emphasis> toggled each time when the user's password has been reset with activated checkbox that should have forced the user to change the password on next login (<u:bug>46012</u:bug>).</para></listitem>

					<listitem><para>Add UCR variable <envar>ucsschool/passwordreset/autosearch_on_change</envar> to control reload of user lists when switching school or class (<u:bug>46905</u:bug>).</para></listitem>

				</itemizedlist>
			</section>

		</section>
	</chapter>
</book>
