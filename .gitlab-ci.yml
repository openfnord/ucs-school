include:
  - project: univention/dist/docker-services
    file: kaniko.yml

build:
  rules:
    - if: '$CI_COMMIT_BRANCH !~ /[1-9][0-9]*[.][0-9]+/'
      when: never
    - changes:
      - .gitlab-ci/Dockerfile.pre-commit
      - .*
  extends: .kaniko_knut
  variables:
    IMAGE_TAG: $CI_REGISTRY/ucsschool/pre-commit:$CI_COMMIT_REF_SLUG
    DOCKERFILE_PATH: .gitlab-ci/Dockerfile.pre-commit
